function Uploader(){this.init()}function Uploader(){this.init()}Uploader.prototype={fileTypes:["image/jpeg","image/png"],fileTypeErrorMsg:"Incorrect File type. Only JPEG and PNG files",defaultText:"Select Image",maxSize:2097152,maxSizeMsg:"File too large. Max size 2MB",updateFileInfo:function(i){var e,d=i.value,t=d.match(/([^\/\\]+)$/);e=null==t?this.defaultText:t[1],$('label[for^="'+i.id+'"]').text(e);for(var l=$("form#uploader input.uploader"),a=!0,o=0;o<l.length;o++)""==l[o].value&&(a=!1);a?$("#upload").removeAttr("disabled"):$("#upload").attr("disabled","disabled")},fileCheck:function(i){if($('input[id="'+i.id+'"]')[0].files.length>0){$('div[id="fileError"]').addClass("hide");var e=$('input[id="'+i.id+'"]')[0].files[0].size,d=$('input[id="'+i.id+'"]')[0].files[0].type;if(e>this.maxSize)return $('input[id="'+i.id+'"]')[0].type="text",$('input[id="'+i.id+'"]')[0].type="file",$('p[id="fileMessage"]').html(this.maxSizeMsg),void $('div[id="fileError"]').removeClass("hide");if(console.log(d),this.fileTypes.indexOf(d)>-1)return void $('div[id="fileError"]').addClass("hide");$('input[id="'+i.id+'"]')[0].type="text",$('input[id="'+i.id+'"]')[0].type="file",$('p[id="fileMessage"]').html(this.fileTypeErrorMsg),$('div[id="fileError"]').removeClass("hide")}},init:function(){$("button#upload").attr("disabled","disabled"),b=$("button#upload"),i=$("input.uploader"),f=$("form#uploader"),0==b.length||0==i.length||0==f.length?console.log('Upload form must have an id of "uploader"\nFile input must have a class of "uploader"\nSubmit button must hav and id of "upload"'):($("button#upload").click(function(i){$("#importModal").modal("hide"),$("#content").addClass("hide"),$('div[id="uploadSpinner"]').removeClass("hide")}),$("input.uploader").change(function(){uploader.fileCheck(this),uploader.updateFileInfo(this)}))}};var uploader=new Uploader;
